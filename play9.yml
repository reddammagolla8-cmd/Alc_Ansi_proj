---
 - name: Play1 for installing firewall
   become: true
   become_user: root
   hosts: localhost
   tasks:
    - name: Install firewall
      yum:
       name: firewalld
       state: latest
    - name: add port to the firewall
      firewalld:
       service: https
       permanent: true
       immediate: yes
       state: enabled
    - name: add port to the firewall
      firewalld:
       service: http
       permanent: true
       immediate: yes
       state: enabled
    - name: add port to the firewall
      firewalld:
       service: samba
       permanent: true
       immediate: yes
       state: enabled
    - name: add port to the firewall
      firewalld:
       service: nfs
       permanent: true
       immediate: yes
       state: enabled
 - name: Play2 for installing http and https
   become: true
   become_user: root
   hosts: localhost
   tasks:
    - name: Install httpd and https 
      yum:
       name:
        - httpd
        - mod_ssl
       state: latest
 - name: Play3 for starting firewalld and http web services
   become: true
   become_user: root
   hosts: localhost
   tasks:
    - name: Start firewalld service
      service:
       name: firewalld
       state: started
       enabled: yes
    - name: Start http 
      service:
       name: httpd
       state: started
       enabled: yes

 

